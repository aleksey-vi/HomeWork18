# OTUS ДЗ 18 Docker

## Домашнее задание
----------------------------------------
Создайте свой кастомный образ nginx на базе alpine. После запуска nginx должен отдавать кастомную страницу (достаточно изменить дефолтную страницу nginx). Определите разницу между контейнером и образом Вывод опишите в домашнем задании. Ответьте на вопрос: Можно ли в контейнере собрать ядро? Собранный образ необходимо запушить в docker hub и дать ссылку на ваш репозиторий.

--------------------------------------------------
### Выполнение
----------------------------------------------------------
Для начала нам необходимо зарегистрировать аккаунт на https://hub.docker.com/. Пока ждем письмо с верификацией(я ждал несколько минут) установим сам docker командой:
``sudo apt-get install docker docker.io``
Затем создадим новый контейнер с уже установленным nginx, назовем его test, который будет слушаться на порту 8833 и это будет ОС Linux alpine
``docker create --name test -p 8833:80 nginx:alpine``
Проверим наш образ командой
``docker images``
И посмотрим сам контейнер
``sudo docker ps -a``
Запустим контейнер
``docker start test``
Для того чтобы зайти в него вводим команду, где ключ t- означает выполнение команд в нашем терминале, а i - интерактивный режим, sh - shell
``docker exec -ti test sh``
После того, как мы вошли в контейнер, для дальнейшей работы нам потребуется текстовый редактор
``apk add nano``
Займемся редактированием дефолтной страницы nginx, для этого перейдем в директорию
``cd /usr/share/nginx/html``
и скопируем дефолтную страницу
``cp index.html custom.html``
После чего редактируем данный файл и приводим его к виду:
``nano custom.html``

      <!DOCTYPE html>
      <html>
      <head>
      <meta charset="utf-8">
      <title>Welcome to nginx!</title>
        <style>
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
        }
          </style>
            </head>
              <body>
                <h1>Спасибо за Проверку!</h1>
                </body>
                </html>

Затем нам нужно указать откуда загружать страницу по дефолту:

``cd /etc/nginx/conf.d ``

``nano default.conf``

      location / {
        root   /usr/share/nginx/html;
        index  custom.html;
      }

и выходим из Docker
``exit``
Перезапускаем наш docker
``docker stop test``
``docker start test``
проверяем все ли работает, заходим в браузере по ссылке http://localhost:8833/ <br>
Чтобы сохранить контейнер Docker, нам просто нужно использовать команду docker commit следующим образом:
``docker commit test``
проверим, что образ сохранен
``docker images``
он сохранен без имени, для того, чтобы присвоить нашему образу имя вводим команду с идентификатором, где bbe36f92cc95 и есть наш идентификатор
``docker tag bbe36f92cc95 alekseyvi/nginx_custom``
К этому времени пришло письмо с подтверждением и мы активировали нашу учетку на https://hub.docker.com. Затем логинимся
``docker login --username alekseyvi``
После чего нас попросят токен, который мы должны получить на сайте, во вкладке security. И затем просто пушим на сайт наш образ
``docker push alekseyvi/nginx_custom``

Ссылка на мой репозиторий https://hub.docker.com/r/alekseyvi/nginx_custom

## Ответы на вопросе в ДЗ
--------------------
## Различие между docker images и docker containers
------------------------------------------------------------------
Основное различие между образом и контейнером — в доступном для записи верхнем слое. Чтобы создать контейнер, движок Docker берет образ, добавляет доступный для записи верхний слой и инициализирует различные параметры (сетевые порты, имя контейнера, идентификатор и лимиты ресурсов).

## Можно ли в контейнере собрать ядро?
-------------------------------------------------
Docker использует ядро операционной системы, в контейнере нет собственного или дополнительного ядра. Все контейнеры, которые запускаются на машине, совместно используют это «главное» ядро. Именно по причине того, что внутри котейнера не существует какой либо полноценной ОС со своими компонентами аналогично виртуальной машине, сборка ядра внутри контейнера невозможна.
